<script>
export default {
    name: 'PentestTypeSelectField',
    props: ['modelValue'],
    emits: ['update:modelValue'],
    mounted() {
        this.loadData();
    },
    methods: {
        change() {
            this.$emit('update:modelValue', this.pentest_types);
        },
        loadData() {
            let url = '/pentest-types/';
            this.$api.get(url).then((response) => {
                this.choices = response.data.results;
                this.pentest_types = [];
                if (this.modelValue === null) {
                    return;
                }
                this.modelValue.forEach((item) => {
                    this.pentest_types.push(item.pk);
                });
            });
        }
    },
    data() {
        return {
            pentest_types: this.modelValue,
            choices: []
        };
    }
};
</script>

<template>
    <label for="pentest_types">Pentest Types</label>
    <MultiSelect @change="change" id="pentest_types" v-model="pentest_types" :options="choices" optionLabel="name" optionValue="pk"></MultiSelect>
</template>